<!DOCTYPE html>
<html>
<body>
    
Hello World

<p id="msg"></p>
<p id="data"></p>
    
<script type = "text/javascript">
    
/* Author: Daniel Ellis 2022 */    
async function getgit (owner, repo, path) { 
    // A function to fetch files from github using the api 
    
  let data = await fetch (
    `https://api.github.com/repos/${owner}/${repo}/contents/${path}`
  )
    .then (d => d.json ())
    .then (d =>
      fetch (
        `https://api.github.com/repos/${owner}/${repo}/git/blobs/${d.sha}`
      )
    )
    .then (d => d.json ())
    .then (d => JSON.parse (atob (d.content)));

  return data;
}
    
function runCode() {
    document.getElementById("msg").innerHTML = "The button has been clicked.";
    let fetchRes = fetch(
    'https://api.github.com/repos/hsauro/testpage/contents');
    // fetchRes is the promise to resolve
    // it by using.then() method
    fetchRes.then(res =>
        res.json()).then(d => {
            document.getElementById("data").innerHTML = d
        })    
    //data = getgit ("hsauro", "testpage", "data.json")
    //document.getElementById("data").innerHTML = data
}  
   
</script>
    
<button onclick = "runCode();" > Get Data </button>
    
</body>
</html> 
